@model IEnumerable<UniversityManagementSystem.Models.ViewModel.AllocateRoomViewModel>

@{
    ViewBag.Title = "ShowRoomAllocation";
}

<div class="input-group">
    <div class="col-md-10">

        @Html.DropDownList("Department", ViewBag.DeptList as SelectList, "-- Select Department --", new { @class = "form-control" })
    </div>
</div>
<table id="table1" class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Code)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Info)
        </th>
       
    </tr>


    <tr>
        <td>
          
        </td>
        <td>
            
        </td>
        <td>
          
        </td>
        
    </tr>


</table>

<script src="~/Scripts/jquery-1.10.2.js"></script>

<script>
                $(document).ready(function () {

                    $("#Department").change(function() {
                        $("#table1").empty();
                        $.get("/Allocate/GetRoomInfoList", { departmentId: $("#Department").val() }, function(data) {
                            var row;
                            row += "<tr><th>" + "Code" + "</th><th>" + "Name" + "</th><th>" + "Shcedule Info" + "</th>";
                            $.each(data, function(i, item) {

                                row += "<tr><td>" + item.Code + "</td><td>" + item.Name + "</td><td>" + item.Info + "</td>";
                            });
                            $("#table1").append(row);
                        });

                    });
                });
</script>