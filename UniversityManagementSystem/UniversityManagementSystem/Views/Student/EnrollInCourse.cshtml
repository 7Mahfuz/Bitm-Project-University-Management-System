@model UniversityManagementSystem.Models.StudentEnrollViewModel

@{
    ViewBag.Title = "EnrollInCourse";
}

<h2>EnrollInCourse</h2>


@using (Html.BeginForm()) 
{
    @Html.AntiForgeryToken()
    
    <div class="form-horizontal">
        <h4>StudentEnrollViewModel</h4>
        <hr />
        @Html.ValidationSummary(true)

        <div class="form-group">
            @Html.LabelFor(model => model.StudentId, new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.DropDownListFor(model => model.StudentId, ViewBag.studentList as SelectList, "-- Select Student RegNo --", new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.StudentId)
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Name, new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Name)
                @Html.ValidationMessageFor(model => model.Name)
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Email, new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Email)
                @Html.ValidationMessageFor(model => model.Email)
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.DepartmentName, new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.DepartmentName)
                @Html.ValidationMessageFor(model => model.DepartmentName)
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.CourseId, new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.DropDownListFor(model => model.CourseId, ViewBag.courseList as SelectList, "-- Select Course --", new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.CourseId)
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Date, new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Date)
                @Html.ValidationMessageFor(model => model.Date)
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Create" class="btn btn-default" />
            </div>
        </div>
    </div>
}

<

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script src="~/Scripts/jquery.validate.unobtrusive.js"></script>
}

<script>
    $(document).ready(function() {
        $("#StudentId").change(function() {
            $.get("/Student/GetCourseList", { StudentId: $("#StudentId").val() }, function(data) {
                $("#CourseId").append("<option value='0'> --Select Course--</option");
                $.each(data, function(index, row) {
                    $("#CourseId").append("<option value='" + row.Id + "'>" + row.Name + "</option");

                });

            });

            //For student's TExt boxes
            $("#StudentId").change(function() {
                $.get("/Student/GetStudent", { StudentId: $("#StudentId").val() }, function(data) {
                    $('#Name').val('');
                    $('#Email').val('');
                    $('#DepartmentName').val('');
                    // $('#CreditToTake').val(data);
                    $('#Name').val(data.Name);
                    $('#Email').val(data.Email);
                    $('#DepartmentName').val(data.RegNO);

                });

            });
        });
    });
</script>